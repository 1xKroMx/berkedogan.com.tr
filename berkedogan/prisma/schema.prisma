datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Task {
  id          Int      @id @default(autoincrement())
  title       String
  completed   Boolean  @default(false)
  completedAt DateTime?
  createdAt   DateTime @default(now())

  deadline    DateTime?
  isRecurring Boolean   @default(false)
  interval    Int?      
  isVisible   Boolean   @default(true)
  notifyEnabled Boolean @default(false)
  notifyTime  String?
  qstashMessageId String?

  @@map("tasks")
}

model SystemState {
  key   String @id
  value String

  @@map("system_state")
}

model PushSubscription {
  id             Int      @id @default(autoincrement())
  endpoint       String   @unique
  subscription   Json
  p256dh         String?
  auth           String?
  expirationTime DateTime?
  isActive       Boolean  @default(true)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @default(now())

  @@map("push_subscriptions")
}
